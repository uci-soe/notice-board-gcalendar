import { format } from "date-fns";
import isToday from "date-fns/is_today";
import isTomorrow from "date-fns/is_tomorrow";
import isMonday from "date-fns/is_monday";
import isTuesday from "date-fns/is_tuesday";
import isWednesday from "date-fns/is_wednesday";
import isThursday from "date-fns/is_thursday";
import isFriday from "date-fns/is_friday";
import isSaturday from "date-fns/is_saturday";
import isSunday from "date-fns/is_sunday";
import axios from 'axios';
import startOfToday from "date-fns/start_of_today";
import addDays from "date-fns/add_days";
import parse from "date-fns/parse";
import withinRange from "date-fns/is_within_range";
export const MINUTE = 1000 * 60;
export const MS_IN_DAY = MINUTE * 60 * 24;

export function formatDescription(desc) {
  if (desc) {
    const clean = desc.replace(/<[^>]*>?/gm, '').replace(/[^a-z\d:.,?!@&\s\n]+/ig, '').split(/\n/g).map(s => s.trim()).filter(s => !!s);
    return clean[0];
  } else {
    return '';
  }
}
export function displayTime(startTime, endTime) {
  return startTime ? `${format(startTime, "h:mm A")} - ${format(endTime, "h:mm A")}` : `All Day`;
}
export function displayHRDate(dateTime, date) {
  return dateTime ? format(dateTime, "MMMM DD") : format(date, "MMMM DD");
}

function displayDayOfWeek(date) {
  if (isMonday(date)) {
    return 'Monday';
  } else if (isTuesday(date)) {
    return 'Tuesday';
  } else if (isWednesday(date)) {
    return 'Wednesday';
  } else if (isThursday(date)) {
    return 'Thursday';
  } else if (isFriday(date)) {
    return 'Friday';
  } else if (isSaturday(date)) {
    return 'Saturday';
  } else if (isSunday(date)) {
    return 'Sunday';
  }
}

export function displayTodayTomorrow(dateTime, date) {
  const test = dateTime || date;

  if (isToday(test)) {
    return 'Today';
  } else if (isTomorrow(test)) {
    return 'Tomorrow';
  } else {
    return displayDayOfWeek(test);
  }
}
export function getEvents(min, max, ID, KEY) {
  const URL = `https://www.googleapis.com/calendar/v3/calendars/${ID}/events`;
  return axios.get(URL, {
    params: {
      key: KEY,
      orderBy: 'startTime',
      timeMin: min.toISOString(),
      timeMax: max.toISOString(),
      singleEvents: true
    }
  }).then(resp => resp.data.items);
}
export function getDate(days) {
  return new Date(Date.now() + MS_IN_DAY * days);
}

function isTodayTomorrow(dateTime, date) {
  const test = dateTime || date;
  return isToday(test) || isTomorrow(test);
}

export function setDays(events, days) {
  const todayAndTmr = events.filter(e => isTodayTomorrow(e));

  if (todayAndTmr.length < 5) {
    const today = startOfToday();
    const maxDays = addDays(today, days);
    return events.filter(function (e) {
      const date = e.start.dateTime ? e.start.dateTime : parse(e.start.date);
      return withinRange(date, today, maxDays);
    });
  }

  return todayAndTmr;
}
<<<<<<< HEAD
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL2xpYi91dGlscy5qcyJdLCJuYW1lcyI6WyJmb3JtYXQiLCJpc1RvZGF5IiwiaXNUb21vcnJvdyIsImlzTW9uZGF5IiwiaXNUdWVzZGF5IiwiaXNXZWRuZXNkYXkiLCJpc1RodXJzZGF5IiwiaXNGcmlkYXkiLCJpc1NhdHVyZGF5IiwiaXNTdW5kYXkiLCJheGlvcyIsInN0YXJ0T2ZUb2RheSIsImFkZERheXMiLCJwYXJzZSIsIndpdGhpblJhbmdlIiwiTUlOVVRFIiwiTVNfSU5fREFZIiwiZm9ybWF0RGVzY3JpcHRpb24iLCJkZXNjIiwiY2xlYW4iLCJyZXBsYWNlIiwic3BsaXQiLCJtYXAiLCJzIiwidHJpbSIsImZpbHRlciIsImRpc3BsYXlUaW1lIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImRpc3BsYXlIUkRhdGUiLCJkYXRlVGltZSIsImRhdGUiLCJkaXNwbGF5RGF5T2ZXZWVrIiwiZGlzcGxheVRvZGF5VG9tb3Jyb3ciLCJ0ZXN0IiwiZ2V0RXZlbnRzIiwibWluIiwibWF4IiwiSUQiLCJLRVkiLCJVUkwiLCJnZXQiLCJwYXJhbXMiLCJrZXkiLCJvcmRlckJ5IiwidGltZU1pbiIsInRvSVNPU3RyaW5nIiwidGltZU1heCIsInNpbmdsZUV2ZW50cyIsInRoZW4iLCJyZXNwIiwiZGF0YSIsIml0ZW1zIiwiZ2V0RGF0ZSIsImRheXMiLCJEYXRlIiwibm93IiwiaXNUb2RheVRvbW9ycm93Iiwic2V0RGF5cyIsImV2ZW50cyIsInRvZGF5QW5kVG1yIiwiZSIsImxlbmd0aCIsInRvZGF5IiwibWF4RGF5cyIsInN0YXJ0Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFRQSxNQUFSLFFBQXFCLFVBQXJCO0FBQ0EsT0FBT0MsT0FBUCxNQUFvQixtQkFBcEI7QUFDQSxPQUFPQyxVQUFQLE1BQXVCLHNCQUF2QjtBQUNBLE9BQU9DLFFBQVAsTUFBcUIsb0JBQXJCO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixxQkFBdEI7QUFDQSxPQUFPQyxX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QUFaLEdBQXFCLENBQXpCLEVBQTRCO0FBQzFCLFVBQU1DLEtBQUssR0FBR3BELFlBQVksRUFBMUI7QUFDQSxVQUFNcUQsT0FBTyxHQUFHcEQsT0FBTyxDQUFDbUQsS0FBRCxFQUFRVCxJQUFSLENBQXZCO0FBQ0EsV0FBT0ssTUFBTSxDQUFDbEMsTUFBUCxDQUFjLFVBQVVvQyxDQUFWLEVBQWE7QUFDaEMsWUFBTTlCLElBQUksR0FBRzhCLENBQUMsQ0FBQ0ksS0FBRixDQUFRbkMsUUFBUixHQUFtQitCLENBQUMsQ0FBQ0ksS0FBRixDQUFRbkMsUUFBM0IsR0FBc0NqQixLQUFLLENBQUNnRCxDQUFDLENBQUNJLEtBQUYsQ0FBUWxDLElBQVQsQ0FBeEQ7QUFDQSxhQUFPakIsV0FBVyxDQUFDaUIsSUFBRCxFQUFPZ0MsS0FBUCxFQUFjQyxPQUFkLENBQWxCO0FBQ0QsS0FITSxDQUFQO0FBSUQ7O0FBQ0QsU0FBT0osV0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtmb3JtYXR9IGZyb20gXCJkYXRlLWZuc1wiO1xyXG5pbXBvcnQgaXNUb2RheSBmcm9tIFwiZGF0ZS1mbnMvaXNfdG9kYXlcIjtcclxuaW1wb3J0IGlzVG9tb3Jyb3cgZnJvbSBcImRhdGUtZm5zL2lzX3RvbW9ycm93XCI7XHJcbmltcG9ydCBpc01vbmRheSBmcm9tIFwiZGF0ZS1mbnMvaXNfbW9uZGF5XCI7XHJcbmltcG9ydCBpc1R1ZXNkYXkgZnJvbSBcImRhdGUtZm5zL2lzX3R1ZXNkYXlcIjtcclxuaW1wb3J0IGlzV2VkbmVzZGF5IGZyb20gXCJkYXRlLWZucy9pc193ZWRuZXNkYXlcIjtcclxuaW1wb3J0IGlzVGh1cnNkYXkgZnJvbSBcImRhdGUtZm5zL2lzX3RodXJzZGF5XCI7XHJcbmltcG9ydCBpc0ZyaWRheSBmcm9tIFwiZGF0ZS1mbnMvaXNfZnJpZGF5XCI7XHJcbmltcG9ydCBpc1NhdHVyZGF5IGZyb20gXCJkYXRlLWZucy9pc19zYXR1cmRheVwiO1xyXG5pbXBvcnQgaXNTdW5kYXkgZnJvbSBcImRhdGUtZm5zL2lzX3N1bmRheVwiO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgc3RhcnRPZlRvZGF5IGZyb20gXCJkYXRlLWZucy9zdGFydF9vZl90b2RheVwiO1xyXG5pbXBvcnQgYWRkRGF5cyBmcm9tIFwiZGF0ZS1mbnMvYWRkX2RheXNcIjtcclxuaW1wb3J0IHBhcnNlIGZyb20gXCJkYXRlLWZucy9wYXJzZVwiO1xyXG5pbXBvcnQgd2l0aGluUmFuZ2UgZnJvbSBcImRhdGUtZm5zL2lzX3dpdGhpbl9yYW5nZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IE1JTlVURSA9IDEwMDAgKiA2MDtcclxuZXhwb3J0IGNvbnN0IE1TX0lOX0RBWSA9IE1JTlVURSAqIDYwICogMjQ7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGVzY3JpcHRpb24oZGVzYykge1xyXG4gIGlmIChkZXNjKSB7XHJcbiAgICBjb25zdCBjbGVhbiA9IGRlc2NcclxuICAgICAgLnJlcGxhY2UoLzxbXj5dKj4/L2dtLCAnJylcclxuICAgICAgLnJlcGxhY2UoL1teYS16XFxkOi4sPyFAJlxcc1xcbl0rL2lnLCAnJylcclxuICAgICAgLnNwbGl0KC9cXG4vZylcclxuICAgICAgLm1hcChzID0+IHMudHJpbSgpKVxyXG4gICAgICAuZmlsdGVyKHMgPT4gISFzKTtcclxuICAgIHJldHVybiBjbGVhblswXTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVRpbWUoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XHJcbiAgcmV0dXJuIHN0YXJ0VGltZSA/IGAke2Zvcm1hdChzdGFydFRpbWUsIFwiaDptbSBBXCIpfSAtICR7Zm9ybWF0KGVuZFRpbWUsIFwiaDptbSBBXCIpfWAgOiBgQWxsIERheWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5SFJEYXRlKGRhdGVUaW1lLCBkYXRlKSB7XHJcbiAgcmV0dXJuIGRhdGVUaW1lID8gZm9ybWF0KGRhdGVUaW1lLCBcIk1NTU0gRERcIikgOiBmb3JtYXQoZGF0ZSwgXCJNTU1NIEREXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5RGF5T2ZXZWVrKGRhdGUpIHtcclxuICBpZiAoaXNNb25kYXkoZGF0ZSkpIHtcclxuICAgIHJldHVybiAnTW9uZGF5JztcclxuICB9XHJcbiAgZWxzZSBpZiAoaXNUdWVzZGF5KGRhdGUpKSB7XHJcbiAgICByZXR1cm4gJ1R1ZXNkYXknO1xyXG4gIH1cclxuICBlbHNlIGlmIChpc1dlZG5lc2RheShkYXRlKSkge1xyXG4gICAgcmV0dXJuICdXZWRuZXNkYXknO1xyXG4gIH1cclxuICBlbHNlIGlmIChpc1RodXJzZGF5KGRhdGUpKSB7XHJcbiAgICByZXR1cm4gJ1RodXJzZGF5JztcclxuICB9XHJcbiAgZWxzZSBpZiAoaXNGcmlkYXkoZGF0ZSkpIHtcclxuICAgIHJldHVybiAnRnJpZGF5JztcclxuICB9XHJcbiAgZWxzZSBpZiAoaXNTYXR1cmRheShkYXRlKSkge1xyXG4gICAgcmV0dXJuICdTYXR1cmRheSc7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKGlzU3VuZGF5KGRhdGUpKSB7XHJcbiAgICByZXR1cm4gJ1N1bmRheSc7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVRvZGF5VG9tb3Jyb3coZGF0ZVRpbWUsIGRhdGUpIHtcclxuICBjb25zdCB0ZXN0ID0gZGF0ZVRpbWUgfHwgZGF0ZTtcclxuICBpZiAoaXNUb2RheSh0ZXN0KSkge1xyXG4gICAgcmV0dXJuICdUb2RheSc7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKGlzVG9tb3Jyb3codGVzdCkpIHtcclxuICAgIHJldHVybiAnVG9tb3Jyb3cnO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHJldHVybiBkaXNwbGF5RGF5T2ZXZWVrKHRlc3QpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEV2ZW50cyhtaW4sIG1heCwgSUQsIEtFWSkge1xyXG4gIGNvbnN0IFVSTCA9IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9jYWxlbmRhci92My9jYWxlbmRhcnMvJHtJRH0vZXZlbnRzYDtcclxuICByZXR1cm4gYXhpb3MuZ2V0KFVSTCwge1xyXG4gICAgcGFyYW1zOiB7XHJcbiAgICAgIGtleTogS0VZLFxyXG4gICAgICBvcmRlckJ5OiAnc3RhcnRUaW1lJyxcclxuICAgICAgdGltZU1pbjogbWluLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHRpbWVNYXg6IG1heC50b0lTT1N0cmluZygpLFxyXG4gICAgICBzaW5nbGVFdmVudHM6IHRydWVcclxuICAgIH1cclxuICB9KVxyXG4gICAgLnRoZW4ocmVzcCA9PiByZXNwLmRhdGEuaXRlbXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0ZShkYXlzKSB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKERhdGUubm93KCkgKyAoTVNfSU5fREFZICogZGF5cykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc1RvZGF5VG9tb3Jyb3coZGF0ZVRpbWUsIGRhdGUpIHtcclxuICBjb25zdCB0ZXN0ID0gZGF0ZVRpbWUgfHwgZGF0ZTtcclxuICByZXR1cm4gaXNUb2RheSh0ZXN0KSB8fCBpc1RvbW9ycm93KHRlc3QpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0RGF5cyhldmVudHMsIGRheXMpIHtcclxuICBjb25zdCB0b2RheUFuZFRtciA9IGV2ZW50cy5maWx0ZXIoKGUpID0+IGlzVG9kYXlUb21vcnJvdyhlKSk7XHJcblxyXG4gIGlmICh0b2RheUFuZFRtci5sZW5ndGggPCA1KSB7XHJcbiAgICBjb25zdCB0b2RheSA9IHN0YXJ0T2ZUb2RheSgpO1xyXG4gICAgY29uc3QgbWF4RGF5cyA9IGFkZERheXModG9kYXksIGRheXMpO1xyXG4gICAgcmV0dXJuIGV2ZW50cy5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgY29uc3QgZGF0ZSA9IGUuc3RhcnQuZGF0ZVRpbWUgPyBlLnN0YXJ0LmRhdGVUaW1lIDogcGFyc2UoZS5zdGFydC5kYXRlKTtcclxuICAgICAgcmV0dXJuIHdpdGhpblJhbmdlKGRhdGUsIHRvZGF5LCBtYXhEYXlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gdG9kYXlBbmRUbXI7XHJcbn0iXX0=
=======
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL2xpYi91dGlscy5qcyJdLCJuYW1lcyI6WyJmb3JtYXQiLCJpc1RvZGF5IiwiaXNUb21vcnJvdyIsImlzTW9uZGF5IiwiaXNUdWVzZGF5IiwiaXNXZWRuZXNkYXkiLCJpc1RodXJzZGF5IiwiaXNGcmlkYXkiLCJpc1NhdHVyZGF5IiwiaXNTdW5kYXkiLCJheGlvcyIsInN0YXJ0T2ZUb2RheSIsImFkZERheXMiLCJwYXJzZSIsIndpdGhpblJhbmdlIiwiTUlOVVRFIiwiTVNfSU5fREFZIiwiZm9ybWF0RGVzY3JpcHRpb24iLCJkZXNjIiwiY2xlYW4iLCJyZXBsYWNlIiwic3BsaXQiLCJtYXAiLCJzIiwidHJpbSIsImZpbHRlciIsImRpc3BsYXlUaW1lIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImRpc3BsYXlIUkRhdGUiLCJkYXRlVGltZSIsImRhdGUiLCJkaXNwbGF5RGF5T2ZXZWVrIiwiZGlzcGxheVRvZGF5VG9tb3Jyb3ciLCJ0ZXN0IiwiZ2V0RXZlbnRzIiwibWluIiwibWF4IiwiSUQiLCJLRVkiLCJVUkwiLCJnZXQiLCJwYXJhbXMiLCJrZXkiLCJvcmRlckJ5IiwidGltZU1pbiIsInRvSVNPU3RyaW5nIiwidGltZU1heCIsInNpbmdsZUV2ZW50cyIsInRoZW4iLCJyZXNwIiwiZGF0YSIsIml0ZW1zIiwiZ2V0RGF0ZSIsImRheXMiLCJEYXRlIiwibm93IiwiaXNUb2RheVRvbW9ycm93Iiwic2V0RGF5cyIsImV2ZW50cyIsInRvZGF5QW5kVG1yIiwiZSIsImxlbmd0aCIsInRvZGF5IiwibWF4RGF5cyIsInN0YXJ0Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFRQSxNQUFSLFFBQXFCLFVBQXJCO0FBQ0EsT0FBT0MsT0FBUCxNQUFvQixtQkFBcEI7QUFDQSxPQUFPQyxVQUFQLE1BQXVCLHNCQUF2QjtBQUNBLE9BQU9DLFFBQVAsTUFBcUIsb0JBQXJCO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixxQkFBdEI7QUFDQSxPQUFPQyxX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QUFaLEdBQXFCLENBQXpCLEVBQTRCO0FBQzFCLFVBQU1DLEtBQUssR0FBR3BELFlBQVksRUFBMUI7QUFDQSxVQUFNcUQsT0FBTyxHQUFHcEQsT0FBTyxDQUFDbUQsS0FBRCxFQUFRVCxJQUFSLENBQXZCO0FBQ0EsV0FBT0ssTUFBTSxDQUFDbEMsTUFBUCxDQUFjLFVBQVVvQyxDQUFWLEVBQWE7QUFDaEMsWUFBTTlCLElBQUksR0FBRzhCLENBQUMsQ0FBQ0ksS0FBRixDQUFRbkMsUUFBUixHQUFtQitCLENBQUMsQ0FBQ0ksS0FBRixDQUFRbkMsUUFBM0IsR0FBc0NqQixLQUFLLENBQUNnRCxDQUFDLENBQUNJLEtBQUYsQ0FBUWxDLElBQVQsQ0FBeEQ7QUFDQSxhQUFPakIsV0FBVyxDQUFDaUIsSUFBRCxFQUFPZ0MsS0FBUCxFQUFjQyxPQUFkLENBQWxCO0FBQ0QsS0FITSxDQUFQO0FBSUQ7O0FBQ0QsU0FBT0osV0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtmb3JtYXR9IGZyb20gXCJkYXRlLWZuc1wiO1xuaW1wb3J0IGlzVG9kYXkgZnJvbSBcImRhdGUtZm5zL2lzX3RvZGF5XCI7XG5pbXBvcnQgaXNUb21vcnJvdyBmcm9tIFwiZGF0ZS1mbnMvaXNfdG9tb3Jyb3dcIjtcbmltcG9ydCBpc01vbmRheSBmcm9tIFwiZGF0ZS1mbnMvaXNfbW9uZGF5XCI7XG5pbXBvcnQgaXNUdWVzZGF5IGZyb20gXCJkYXRlLWZucy9pc190dWVzZGF5XCI7XG5pbXBvcnQgaXNXZWRuZXNkYXkgZnJvbSBcImRhdGUtZm5zL2lzX3dlZG5lc2RheVwiO1xuaW1wb3J0IGlzVGh1cnNkYXkgZnJvbSBcImRhdGUtZm5zL2lzX3RodXJzZGF5XCI7XG5pbXBvcnQgaXNGcmlkYXkgZnJvbSBcImRhdGUtZm5zL2lzX2ZyaWRheVwiO1xuaW1wb3J0IGlzU2F0dXJkYXkgZnJvbSBcImRhdGUtZm5zL2lzX3NhdHVyZGF5XCI7XG5pbXBvcnQgaXNTdW5kYXkgZnJvbSBcImRhdGUtZm5zL2lzX3N1bmRheVwiO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBzdGFydE9mVG9kYXkgZnJvbSBcImRhdGUtZm5zL3N0YXJ0X29mX3RvZGF5XCI7XG5pbXBvcnQgYWRkRGF5cyBmcm9tIFwiZGF0ZS1mbnMvYWRkX2RheXNcIjtcbmltcG9ydCBwYXJzZSBmcm9tIFwiZGF0ZS1mbnMvcGFyc2VcIjtcbmltcG9ydCB3aXRoaW5SYW5nZSBmcm9tIFwiZGF0ZS1mbnMvaXNfd2l0aGluX3JhbmdlXCI7XG5cbmV4cG9ydCBjb25zdCBNSU5VVEUgPSAxMDAwICogNjA7XG5leHBvcnQgY29uc3QgTVNfSU5fREFZID0gTUlOVVRFICogNjAgKiAyNDtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERlc2NyaXB0aW9uKGRlc2MpIHtcbiAgaWYgKGRlc2MpIHtcbiAgICBjb25zdCBjbGVhbiA9IGRlc2NcbiAgICAgIC5yZXBsYWNlKC88W14+XSo+Py9nbSwgJycpXG4gICAgICAucmVwbGFjZSgvW15hLXpcXGQ6Liw/IUAmXFxzXFxuXSsvaWcsICcnKVxuICAgICAgLnNwbGl0KC9cXG4vZylcbiAgICAgIC5tYXAocyA9PiBzLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIocyA9PiAhIXMpO1xuICAgIHJldHVybiBjbGVhblswXTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlUaW1lKHN0YXJ0VGltZSwgZW5kVGltZSkge1xuICByZXR1cm4gc3RhcnRUaW1lID8gYCR7Zm9ybWF0KHN0YXJ0VGltZSwgXCJoOm1tIEFcIil9IC0gJHtmb3JtYXQoZW5kVGltZSwgXCJoOm1tIEFcIil9YCA6IGBBbGwgRGF5YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlIUkRhdGUoZGF0ZVRpbWUsIGRhdGUpIHtcbiAgcmV0dXJuIGRhdGVUaW1lID8gZm9ybWF0KGRhdGVUaW1lLCBcIk1NTU0gRERcIikgOiBmb3JtYXQoZGF0ZSwgXCJNTU1NIEREXCIpO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5RGF5T2ZXZWVrKGRhdGUpIHtcbiAgaWYgKGlzTW9uZGF5KGRhdGUpKSB7XG4gICAgcmV0dXJuICdNb25kYXknO1xuICB9XG4gIGVsc2UgaWYgKGlzVHVlc2RheShkYXRlKSkge1xuICAgIHJldHVybiAnVHVlc2RheSc7XG4gIH1cbiAgZWxzZSBpZiAoaXNXZWRuZXNkYXkoZGF0ZSkpIHtcbiAgICByZXR1cm4gJ1dlZG5lc2RheSc7XG4gIH1cbiAgZWxzZSBpZiAoaXNUaHVyc2RheShkYXRlKSkge1xuICAgIHJldHVybiAnVGh1cnNkYXknO1xuICB9XG4gIGVsc2UgaWYgKGlzRnJpZGF5KGRhdGUpKSB7XG4gICAgcmV0dXJuICdGcmlkYXknO1xuICB9XG4gIGVsc2UgaWYgKGlzU2F0dXJkYXkoZGF0ZSkpIHtcbiAgICByZXR1cm4gJ1NhdHVyZGF5JztcbiAgfVxuICBlbHNlIGlmIChpc1N1bmRheShkYXRlKSkge1xuICAgIHJldHVybiAnU3VuZGF5JztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVRvZGF5VG9tb3Jyb3coZGF0ZVRpbWUsIGRhdGUpIHtcbiAgY29uc3QgdGVzdCA9IGRhdGVUaW1lIHx8IGRhdGU7XG4gIGlmIChpc1RvZGF5KHRlc3QpKSB7XG4gICAgcmV0dXJuICdUb2RheSc7XG4gIH1cbiAgZWxzZSBpZiAoaXNUb21vcnJvdyh0ZXN0KSkge1xuICAgIHJldHVybiAnVG9tb3Jyb3cnO1xuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiBkaXNwbGF5RGF5T2ZXZWVrKHRlc3QpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudHMobWluLCBtYXgsIElELCBLRVkpIHtcbiAgY29uc3QgVVJMID0gYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2NhbGVuZGFyL3YzL2NhbGVuZGFycy8ke0lEfS9ldmVudHNgO1xuICByZXR1cm4gYXhpb3MuZ2V0KFVSTCwge1xuICAgIHBhcmFtczoge1xuICAgICAga2V5OiBLRVksXG4gICAgICBvcmRlckJ5OiAnc3RhcnRUaW1lJyxcbiAgICAgIHRpbWVNaW46IG1pbi50b0lTT1N0cmluZygpLFxuICAgICAgdGltZU1heDogbWF4LnRvSVNPU3RyaW5nKCksXG4gICAgICBzaW5nbGVFdmVudHM6IHRydWVcbiAgICB9XG4gIH0pXG4gICAgLnRoZW4ocmVzcCA9PiByZXNwLmRhdGEuaXRlbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0ZShkYXlzKSB7XG4gIHJldHVybiBuZXcgRGF0ZShEYXRlLm5vdygpICsgKE1TX0lOX0RBWSAqIGRheXMpKTtcbn1cblxuZnVuY3Rpb24gaXNUb2RheVRvbW9ycm93KGRhdGVUaW1lLCBkYXRlKSB7XG4gIGNvbnN0IHRlc3QgPSBkYXRlVGltZSB8fCBkYXRlO1xuICByZXR1cm4gaXNUb2RheSh0ZXN0KSB8fCBpc1RvbW9ycm93KHRlc3QpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RGF5cyhldmVudHMsIGRheXMpIHtcbiAgY29uc3QgdG9kYXlBbmRUbXIgPSBldmVudHMuZmlsdGVyKChlKSA9PiBpc1RvZGF5VG9tb3Jyb3coZSkpO1xuXG4gIGlmICh0b2RheUFuZFRtci5sZW5ndGggPCA1KSB7XG4gICAgY29uc3QgdG9kYXkgPSBzdGFydE9mVG9kYXkoKTtcbiAgICBjb25zdCBtYXhEYXlzID0gYWRkRGF5cyh0b2RheSwgZGF5cyk7XG4gICAgcmV0dXJuIGV2ZW50cy5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBlLnN0YXJ0LmRhdGVUaW1lID8gZS5zdGFydC5kYXRlVGltZSA6IHBhcnNlKGUuc3RhcnQuZGF0ZSk7XG4gICAgICByZXR1cm4gd2l0aGluUmFuZ2UoZGF0ZSwgdG9kYXksIG1heERheXMpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0b2RheUFuZFRtcjtcbn0iXX0=
>>>>>>> ebb138494a09226f23a690e794e63d8ba0332661
